<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>调试 | Glide v4 中文站</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://muyangmin.github.io/glide-docs-cn/debugging.html">
  <!-- Alternative links -->
  
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/glide-docs-cn/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/glide-docs-cn/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/glide-docs-cn/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/glide-docs-cn/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/glide-docs-cn/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/glide-docs-cn/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/glide-docs-cn/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/glide-docs-cn/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/glide-docs-cn/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/glide-docs-cn/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/glide-docs-cn/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/glide-docs-cn/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/glide-docs-cn/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/glide-docs-cn/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  <link rel="stylesheet" href="/glide-docs-cn/css/navy.css">
  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/glide-docs-cn/atom.xml" title="Glide v4 中文站">
  <!-- Open Graph -->
  <!-- <meta name="description" content="原文链接：点击查看 本地日志(Local Logs)如果你拥有设备的访问权限，你可以使用adb logcat或你的IDE查看一些日志。你可以使用adb shell setprop log.tag.&amp;lt;tag_name&amp;gt; &amp;lt;VERBOSE|DEBUG&amp;gt;操作为任何下面提到的标签(tag))开启日志。VERBOSE级别的日志会显得更加冗余但包含更多有用的信息。根据你要查看的标签的不">
<meta property="og:type" content="website">
<meta property="og:title" content="调试">
<meta property="og:url" content="https://muyangmin.github.io/glide-docs-cn/debugging.html">
<meta property="og:site_name" content="Glide v4 中文站">
<meta property="og:description" content="原文链接：点击查看 本地日志(Local Logs)如果你拥有设备的访问权限，你可以使用adb logcat或你的IDE查看一些日志。你可以使用adb shell setprop log.tag.&amp;lt;tag_name&amp;gt; &amp;lt;VERBOSE|DEBUG&amp;gt;操作为任何下面提到的标签(tag))开启日志。VERBOSE级别的日志会显得更加冗余但包含更多有用的信息。根据你要查看的标签的不">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2017-09-12T05:45:47.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="调试">
<meta name="twitter:description" content="原文链接：点击查看 本地日志(Local Logs)如果你拥有设备的访问权限，你可以使用adb logcat或你的IDE查看一些日志。你可以使用adb shell setprop log.tag.&amp;lt;tag_name&amp;gt; &amp;lt;VERBOSE|DEBUG&amp;gt;操作为任何下面提到的标签(tag))开启日志。VERBOSE级别的日志会显得更加冗余但包含更多有用的信息。根据你要查看的标签的不"> -->
</head>

<body>
  <div id="container">
    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">调试</h1>
                
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>原文链接：<a href="http://bumptech.github.io/glide/doc/debugging.html" target="_blank" rel="external">点击查看</a></p>
<h3 id="本地日志-Local-Logs" class="article-heading"><a href="#本地日志-Local-Logs" class="headerlink" title="本地日志(Local Logs)"></a>本地日志(Local Logs)<a class="article-anchor" href="#本地日志-Local-Logs" aria-hidden="true"></a></h3><p>如果你拥有设备的访问权限，你可以使用<code>adb logcat</code>或你的IDE查看一些日志。你可以使用<code>adb shell setprop log.tag.&lt;tag_name&gt; &lt;VERBOSE|DEBUG&gt;</code>操作为任何下面提到的标签(<code>tag</code>))开启日志。VERBOSE级别的日志会显得更加冗余但包含更多有用的信息。根据你要查看的标签的不同，你可以把VERBOSE和DEBUG级别的信息都尝试一下，以决定哪个级别的信息是你最需要的。</p>
<h4 id="请求错误" class="article-heading"><a href="#请求错误" class="headerlink" title="请求错误"></a>请求错误<a class="article-anchor" href="#请求错误" aria-hidden="true"></a></h4><p>最高级别和最容易理解的日志都通过<code>Glide</code>标签打印。Glide标签将记录成功和失败的请求以及不同级别的详细信息，具体取决于日志级别。VERBOSE会被用于记录成功的请求，DEBUG则会打印出详细的错误信息。</p>
<p>你也可以通过手动调用[<code>setLogLevel(int)</code>][1]方法控制Glide标签的冗余度。<code>setLogLevel</code>允许你–举个栗子–在开发构建(developer builds)时启用更加冗余的日志，而在发布(release builds)构建时则关闭它们。</p>
<h4 id="预料之外的缓存丢失" class="article-heading"><a href="#预料之外的缓存丢失" class="headerlink" title="预料之外的缓存丢失"></a>预料之外的缓存丢失<a class="article-anchor" href="#预料之外的缓存丢失" aria-hidden="true"></a></h4><p><code>Engine</code>标签会详细记录请求被填充的全过程，并包括用于存储相应资源的完整内存缓存键。如果你正在尝试调试“内存中明明有这个图片，为什么没在另一个地方用到”的问题，那么<code>Engine</code>标签可以让你直观地比较两者的缓存键的区别。</p>
<p>对于每一个开始了的请求，<code>Engine</code>标签将会记录这个请求将会从哪个地方加载完成：缓存，活动资源，已存在的加载过程，或者一个新的加载过程。缓存：意味着这个资源暂时没有被用到，但是在内存缓存中可用。活动资源：表示这个资源正在被另一个<code>Target</code>使用，一般是在一个<code>View</code>中。已存在的加载过程：表示这个资源虽然现在在内存中不可用，但是另一个<code>Target</code>已经在早先发起了对同一个资源的请求，并且这个请求还在处理中。最后，新的加载过程表示这个资源既不在内存中，也没有被其他地方请求过，那么这将触发一次新的加载。</p>
<h4 id="图片和本地日志丢失" class="article-heading"><a href="#图片和本地日志丢失" class="headerlink" title="图片和本地日志丢失"></a>图片和本地日志丢失<a class="article-anchor" href="#图片和本地日志丢失" aria-hidden="true"></a></h4><p>在某些情况下，你可能会发现某个图片永远不会加载出来，而且这个请求甚至还没有<code>Glide</code>标签和<code>Engine</code>标签的日志。这可能有以下一些原因。</p>
<h5 id="启动请求失败-Failing-to-start-the-request" class="article-heading"><a href="#启动请求失败-Failing-to-start-the-request" class="headerlink" title="启动请求失败(Failing to start the request)"></a>启动请求失败(Failing to start the request)<a class="article-anchor" href="#启动请求失败-Failing-to-start-the-request" aria-hidden="true"></a></h5><p>请检查你是否为你的请求调用了[<code>into()</code>][2] 或者 [<code>submit()</code>][3]方法。很显然，如果你忘记了调用这两个方法，Glide不会认为你已经要求开始加载。</p>
<h5 id="未指定尺寸（Missing-Size）" class="article-heading"><a href="#未指定尺寸（Missing-Size）" class="headerlink" title="未指定尺寸（Missing Size）"></a>未指定尺寸（Missing Size）<a class="article-anchor" href="#未指定尺寸（Missing-Size）" aria-hidden="true"></a></h5><p>如果你确信你调用了[<code>into()</code>][2]、[<code>submit()</code>][3]之一，并且仍然没有看到日志，那么最可能的解释是，Glide无法决定你即将加载资源的<code>View</code>或<code>Target</code>的尺寸。</p>
<h6 id="自定义Target-Custom-Targets" class="article-heading"><a href="#自定义Target-Custom-Targets" class="headerlink" title="自定义Target(Custom Targets)"></a>自定义Target(Custom Targets)<a class="article-anchor" href="#自定义Target-Custom-Targets" aria-hidden="true"></a></h6><p>如果你正在使用一个自定义的<code>Target</code>，请确保你实现了[<code>getSize</code>][4]方法并使用了非零的宽高来调用指定的回调方法，或者继承自一个已经为你实现了这个方法的<code>Target</code>，例如[<code>ViewTarget</code>][5]。</p>
<h6 id="Views" class="article-heading"><a href="#Views" class="headerlink" title="Views"></a>Views<a class="article-anchor" href="#Views" aria-hidden="true"></a></h6><p>如果你只是在往一个<code>View</code>中加载资源，那么最大的可能是你的这个view要么还没有被布局(layout)过，要么被指定了零宽或高。View的可见性被设置为<code>View.GONE</code>或它并没有被attach，都会导致view不会被layout。如果View和/或它们的父控件被以特定方式组合<code>wrap_content</code>和<code>match_parent</code>来作为宽高，则view可能会收到一个无效的或为0的宽高值。你可以试验一下，将你的view设定为非0的尺寸，或在请求时使用[<code>override(int, int)</code> API][6]来为Glide传入一个特定的尺寸。</p>
<h4 id="请求监听器与定制日志" class="article-heading"><a href="#请求监听器与定制日志" class="headerlink" title="请求监听器与定制日志"></a>请求监听器与定制日志<a class="article-anchor" href="#请求监听器与定制日志" aria-hidden="true"></a></h4><p>如果你想使用编程的办法跟踪成功和失败信息、跟踪应用中的整体缓存命中率，或增加对本地日志的控制，你可以使用[<code>RequestListener</code>][7] 接口。<code>RequestListener</code>可以通过[<code>RequestBuilder#listener()</code>][8]方法来添加到单独的加载请求中。下面是一个使用示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">Glide.with(fragment)</div><div class="line">   .load(url)</div><div class="line">   .listener(<span class="keyword">new</span> RequestListener() &#123;</div><div class="line">       <span class="meta">@Override</span></div><div class="line">       <span class="function"><span class="keyword">boolean</span> <span class="title">onLoadFailed</span><span class="params">(@Nullable GlideException e, Object model,</span></span></div><div class="line"><span class="function"><span class="params">           Target&lt;R&gt; target, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">         <span class="comment">// Log errors here.</span></div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="meta">@Override</span></div><div class="line">       <span class="function"><span class="keyword">boolean</span> <span class="title">onResourceReady</span><span class="params">(R resource, Object model, Target&lt;R&gt; target,</span></span></div><div class="line"><span class="function"><span class="params">           DataSource dataSource, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">         <span class="comment">// Log successes here or use DataSource to keep track of cache hits and misses.</span></div><div class="line">       &#125;</div><div class="line">    &#125;)</div><div class="line">    .into(imageView);</div></pre></td></tr></table></figure>
<p>To save object allocations, you can re-use the same <code>RequestListener</code> for multiple loads.<br>为减少对象分配起见，你可以为多个加载重用相同的<code>RequestListener</code>。</p>
<p>[1]: /glide/javadocs/400/com/bumptech/glide/GlideBuilder.html#setLogLevel-int-<br>[2]: /glide/javadocs/400/com/bumptech/glide/RequestBuilder.html#into-android.widget.ImageView-<br>[3]: /glide/javadocs/400/com/bumptech/glide/RequestBuilder.html#submit-int-int-<br>[4]: /glide/javadocs/400/com/bumptech/glide/request/target/Target.html#getSize-com.bumptech.glide.request.target.SizeReadyCallback-<br>[5]: /glide/javadocs/400/com/bumptech/glide/request/target/ViewTarget.html<br>[6]: /glide/javadocs/400/com/bumptech/glide/request/RequestOptions.html#override-int-int-<br>[7]: /glide/javadocs/400/com/bumptech/glide/request/RequestListener.html<br>[8]: /glide/javadocs/400/com/bumptech/glide/RequestBuilder.html#listener-com.bumptech.glide.request.RequestListener-</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2017-09-12T05:45:47.000Z" itemprop="dateModified">上次更新：2017-09-12</time>
                
              </footer>
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#本地日志-Local-Logs"><span class="toc-text">本地日志(Local Logs)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#请求错误"><span class="toc-text">请求错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#预料之外的缓存丢失"><span class="toc-text">预料之外的缓存丢失</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#图片和本地日志丢失"><span class="toc-text">图片和本地日志丢失</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#启动请求失败-Failing-to-start-the-request"><span class="toc-text">启动请求失败(Failing to start the request)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#未指定尺寸（Missing-Size）"><span class="toc-text">未指定尺寸（Missing Size）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#自定义Target-Custom-Targets"><span class="toc-text">自定义Target(Custom Targets)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Views"><span class="toc-text">Views</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#请求监听器与定制日志"><span class="toc-text">请求监听器与定制日志</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">回到顶部</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">首页</strong><a href="index.html" class="sidebar-link">关于Glides</a><strong class="sidebar-title">文档</strong><a href="download-setup.html" class="sidebar-link">下载和初始化</a><a href="getting-started.html" class="sidebar-link">开始使用</a><a href="generatedapi.html" class="sidebar-link">生成的API</a><a href="placeholders.html" class="sidebar-link">占位符</a><a href="options.html" class="sidebar-link">选项</a><a href="transformations.html" class="sidebar-link">变换</a><a href="targets.html" class="sidebar-link">目标</a><a href="transitions.html" class="sidebar-link">过渡</a><a href="configuration.html" class="sidebar-link">配置</a><a href="caching.html" class="sidebar-link">缓存</a><a href="debugging.html" class="sidebar-link current">调试</a><a href="migrating.html" class="sidebar-link">从v3迁移到v4</a><strong class="sidebar-title">其他指南</strong><a href="http://bumptech.github.io/glide/ref/javadocs.html" class="sidebar-link">Javadocs</a><a href="samples.html" class="sidebar-link">示例项目</a><strong class="sidebar-title">集成库</strong><a href="about.html" class="sidebar-link">关于集成库</a><a href="okhttp3.html" class="sidebar-link">OkHttp3</a><a href="volley.html" class="sidebar-link">Volley</a><a href="recyclerview.html" class="sidebar-link">RecyclerView</a><strong class="sidebar-title">开发者</strong><a href="snapshots.html" class="sidebar-link">快照版本</a><a href="contributing.html" class="sidebar-link">贡献代码或文档</a><a href="http://bumptech.github.io/glide/dev/open-source-licenses.html" class="sidebar-link">开源许可证</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2017 <a href="https://github.com/Muyangmin/glide-docs-cn/graphs/contributors" target="_blank">Muyangmin</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      

      
      <a href="https://github.com/Muyangmin/glide-docs-cn" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
      
    </div>
  </div>
</footer>

  </div>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="/glide-docs-cn/js/toc.js"></script>
<!-- endbuild -->
</body>
</html>